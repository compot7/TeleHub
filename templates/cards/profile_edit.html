{% extends 'base.html' %}

{% block title %}Редактирование профиля{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">
                        <i class="fas fa-user-edit me-2"></i>Редактирование профиля
                    </h4>
                </div>
                <div class="card-body">
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        
                        <h5 class="mb-3">Основная информация</h5>
                        <div class="mb-3">
                            <label for="id_avatar" class="form-label">Аватар</label>
                            {% if user.avatar %}
                                <div class="mb-2">
                                    <img src="{{ user.avatar.url }}" alt="Avatar" style="width: 100px; height: 100px; object-fit: cover; border-radius: 50%;">
                                </div>
                            {% endif %}
                            <input type="file" name="avatar" class="form-control" id="id_avatar" accept="image/*">
                        </div>
                        
                        <div class="mb-3">
                            <label for="id_background_image" class="form-label">Фоновое изображение</label>
                            {% if user.background_image %}
                                <div class="mb-2">
                                    <img src="{{ user.background_image.url }}" alt="Background" style="max-width: 300px; max-height: 150px; object-fit: cover; border-radius: 5px;">
                                </div>
                            {% endif %}
                            <input type="file" name="background_image" class="form-control" id="id_background_image" accept="image/*">
                        </div>
                        
                        <div class="mb-3">
                            <label for="id_title" class="form-label">Должность</label>
                            <input type="text" name="title" class="form-control" id="id_title" value="{{ form.title.value|default:user.title|default:'' }}" placeholder="Например: Веб-разработчик">
                        </div>
                        
                        <div class="mb-3">
                            <label for="id_bio" class="form-label">О себе</label>
                            <textarea name="bio" class="form-control" id="id_bio" rows="5" placeholder="Расскажите о себе...">{{ form.bio.value|default:user.bio|default:'' }}</textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label for="id_skills" class="form-label">Навыки</label>
                            <input type="text" name="skills" class="form-control" id="id_skills" value="{{ form.skills.value|default:user.skills|default:'' }}" placeholder="Навыки через запятую">
                        </div>
                        
                        <hr class="my-4">
                        
                        <h5 class="mb-3">Контакты</h5>
                        <div class="mb-3">
                            <label for="id_phone" class="form-label">Телефон</label>
                            <input type="text" name="phone" class="form-control" id="id_phone" value="{{ form.phone.value|default:user.phone|default:'' }}" placeholder="+7 (999) 123-45-67">
                        </div>
                        
                        <div class="mb-3">
                            <label for="id_email_public" class="form-label">Публичный email</label>
                            <input type="email" name="email_public" class="form-control" id="id_email_public" value="{{ form.email_public.value|default:user.email_public|default:'' }}">
                        </div>
                        
                        <div class="d-grid gap-2 mt-4">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-save me-2"></i>Сохранить изменения
                            </button>
                            <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary">
                                <i class="fas fa-arrow-left me-2"></i>Назад в кабинет
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

